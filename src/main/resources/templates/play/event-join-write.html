<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ì²´í—˜í•™ìŠµ ì‹ ì²­</title>
    <link rel="stylesheet" href="/css/components/header.css">
    <link rel="stylesheet" href="/css/components/footer.css">
    <link rel="stylesheet" href="/css/play/event-join-write.css">
    <link rel="shortcut icon" href="/images/logo_favi/favi/favicon.ico">

    <style>
        .selected-option{
            display: flex;
        }

    </style>
</head>

<body>
<div th:insert="~{/components/header:: header}"></div>
<div>
    <div id="header"></div>

    <div class="wrap">
        <div class="now-kids.container">
            <div class="nav-header-box nav-header-background">
                <div style="display: flex">
                    <span class="nav-header-span">ë³´í˜¸ì ë˜ëŠ” ì¼ë°˜ ë‘˜ ì¤‘ ì„ íƒ</span>
                </div>
                <a href="javascript:void(0)" class="profile-box">
                    <span class="profile-name" th:text="${eventDTO.memberNickname}">ì„ì¢…ìš±</span><span>ì˜</span>
                    <p>ì²´í—˜í•™ìŠµ ì‹ ì²­</p>
                </a>
                <button type="button" class="profile-btn">
                        <span class="profile-span">
<!--                            <span>ì²´í—˜í•™ìŠµ ê²Œì‹œê¸€ ë²ˆí˜¸</span>-->
                            <!--                            <span class="profile-span">1</span>-->
                            <!--                             <svg viewBox="0 0 32 32" focusable="false" role="presentation" class="arrow-icon"
                                                            aria-hidden="true" style="width: 20px; height: 20px">
                                                            <path d="M16 22.4L5.6 12l1.12-1.12L16 20.16l9.28-9.28L26.4 12 16 22.4z"></path>
                                                        </svg> -->
                        </span>
                </button>
            </div>
            <nav class="side-nav-box">
                <div class="side-nav-layout"></div>
                <ul>
                    <li>
                        <div href="javascript:void(0)" class="nav-title-box">
                            ì²´í—˜í•™ìŠµ ì‹ ì²­ ìˆœì„œ
                                                             <span>
                                                                <svg viewBox="0 0 32 32" focusable="false" role="presentation"
                                                                    class="nav-arrow-icon" aria-hidden="true" style="width: 20px; height: 20px">
                                                                    <path d="M16 22.4L5.6 12l1.12-1.12L16 20.16l9.28-9.28L26.4 12 16 22.4z"></path>
                                                                </svg>
                                                            </span>
                        </div>
                        <ul class="nav-info-ul">
                            <li>
                                <a href="javascript:void(0)" class="nav-detail-title">ì²´í—˜í•™ìŠµ ì‹ ì²­</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>

        <div class="content-wrap">
            <section class="content-container">
                <ol class="content-ol">
                    <li class="content-ol-li">ì²´í—˜í•™ìŠµ ì‹ ì²­</li>
                </ol>
                <div class="content-title">ì²´í—˜í•™ìŠµ ì‹ ì²­í•˜ê¸°</div>
                <div class="content-sub-title">ì²´í—˜í•™ìŠµì„ ì‹ ì²­í•˜ê¸° ìœ„í•´ ê¸°ë³¸ì •ë³´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.</div>
                <div class="content-box">
                    <section class="content-section">
                        <div class="input-title-box">
                            <div class="input-title-layout2">
                                <h2>ì²´í—˜í•™ìŠµ ì œëª©</h2>
                            </div>
                            <div class="input-sub-title">
                                ì§„í–‰í•  ì²´í—˜í•™ìŠµì˜ ì œëª©ì…ë‹ˆë‹¤
                            </div>
                            <div class="input-title-box">
                                <div class="input-box">
                                    <div class="input-layout">
                                        <div class="normal-text-input input-size title" th:text="${eventDTO.boardTitle}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section class="content-section">
                        <div class="input-title-box">
                            <div class="input-title-layout">
                                <h2>ì²´í—˜í•™ìŠµ ë‹¹ì¼ë‚ ì§œ</h2>
                            </div>
                            <div class="input-sub-title">ì²´í—˜í•™ìŠµì„ ì§„í–‰í•˜ê³ ì í•˜ì‹œëŠ” ë‚ ì§œë¥¼ ê¸°ì…í•´ì£¼ì„¸ìš”</div>
                            <div class="input-box">
                                <div class="select-box">
                                    <div style="position: relative">
                                        <div class="date-wrap">
                                            <div class="date-container">
                                                <div class="date-input-box">
                                                    <input type="date" name="" class="form-control date-box"
                                                           placeholder="ì˜ˆì‹œ) 2023-04-28" autocomplete="off" size="12"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section class="content-section">
                        <div class="input-title-box">
                            <div class="input-title-layout2">
                                <h2>ì•„ì´ ì •ë³´</h2>
                            </div>
                            <div class="input-sub-title">
                                ì²´í—˜í•™ìŠµì„ ì§„í–‰í•  ì•„ì´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.
                            </div>
                            <div class="child-box">
                                <div class="select-box child-select">
                                    <div class="select-layout-kid">
                                        <div class="select-value-box">
                                            <div class="select-value select-placeholder-kid">
                                                ì„ íƒí•´ì£¼ì„¸ìš”.
                                            </div>
                                            <input type="text" class="dummy-input" readonly>
                                        </div>
                                        <div class="select-icon-box">
                                            <div class="select-icon-layout">
                                                <svg viewBox="0 0 32 32" focusable="false" role="presentation"
                                                     aria-hidden="true" style="color: rgb(134, 142, 150)">
                                                    <path d="M16 22.4L5.6 12l1.12-1.12L16 20.16l9.28-9.28L26.4 12 16 22.4z"></path>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="select-menu-box-kid">
                                        <div class="select-menu-layout">
                                            <th:block th:each="kid: ${kidsList}">
                                                <div class="select-option-kid">
                                                    <span class="select-name" th:text="${kid.kidName}">ê¹€ë™í•œ&nbsp;</span>
                                                    (ë§Œ&nbsp;
                                                    <span class="select-age" th:text="${kid.kidAge}">3</span>
                                                    ì„¸)&nbsp;(
                                                    <span class="select-gender" th:if="${kid.kidGender.toString() == 'MAN'}">ğŸ‘¦)</span>
                                                    <span class="select-gender" th:if="${kid.kidGender.toString() == 'WOMAN'}">ğŸ‘§)</span>
                                                </div>
                                                <input class="kidIdforPurchase" style="display: none" th:value="${kid.id}" >
                                                <input class="eventIdforPurchase" style="display: none" value="${eventDTO.id}" >
                                            </th:block>
                                        </div>
                                    </div>
                                    <form id="go-payment" th:action="@{/payment/pay/{eventId}(eventId=${eventDTO.id})}" method="get">
                                        <div class="kids-table">
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section class="content-section">
                        <div class="input-title-box">
                            <div class="input-title-layout2">
                                <h2>í†µì†”ì ì¢…ë¥˜</h2>
                            </div>
                            <div class="input-sub-title">
                                ì§„í–‰í•  ì²´í—˜í•™ìŠµì˜ í†µì†”ì ì¢…ë¥˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.
                            </div>
                            <div class="input-box">
                                <div class="select-box">
                                    <div style="position: relative">
                                        <div class="select-layout">
                                            <div class="select-value-box">
                                                <div class="select-value select-placeholder">
                                                    ì„ íƒí•´ì£¼ì„¸ìš”.
                                                </div>
                                                <input type="text" class="dummy-input" readonly/>
                                            </div>
                                            <div class="select-icon-box">
                                                <div class="select-icon-layout">
                                                    <svg viewBox="0 0 32 32" focusable="false" role="presentation"
                                                         aria-hidden="true" style="color: rgb(134, 142, 150)">
                                                        <path
                                                                d="M16 22.4L5.6 12l1.12-1.12L16 20.16l9.28-9.28L26.4 12 16 22.4z">
                                                        </path>
                                                    </svg>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="select-menu-box">
                                            <div class="select-menu-layout">
                                                <div class="select-option">ì¥ì• ì¸</div>
                                                <div class="select-option">ë¹„ì¥ì• ì¸</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <button type="submit" form="go-payment" class="btn confirm-button">
                        <span>ê²°ì œí•˜ê¸°</span>
                    </button>
                </div>
            </section>
        </div>
    </div>
</div>
<div th:insert="~{/components/footer:: footer}"></div>
</body>
<script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script th:inline="javascript">
    let eventDTO = [[${eventDTO}]];
    console.log(eventDTO)
</script>
<script src="/js/play/event-join-write.js"></script>
<script>

    const $selectBox = $(".select-layout");
    const $selectMenuBox = $(".select-menu-box");

    $selectBox.mouseup(() => {
        $selectMenuBox.show();
    });

    $selectMenuBox.mouseleave(() => {
        $selectMenuBox.hide();
    })


    let $selectOption = $(".select-option");

    $selectOption.each((i, e) => {

        $(e).click(() => {
            $selectOption.css("color", "#0c0c0c");
            $(".select-placeholder").css("color", "#0c0c0c");
            $(".select-placeholder").text($(e).text());
            $(e).css("color", "#e1e1e1");
            $selectMenuBox.hide();
        });
    });

    /* ì•„ì´ ì •ë³´ */
    const $selectBoxKid = $(".select-layout-kid");
    const $selectMenuBoxKid = $(".select-menu-box-kid");

    $selectBoxKid.mouseup(() => {
        $selectMenuBoxKid.show();
    });

    $selectMenuBoxKid.mouseleave(() => {
        $selectMenuBoxKid.hide();
    })


    let $selectOptionKid = $(".select-option-kid");

    $selectOptionKid.each((i, e) => {
        $(e).click(() => {
            let kids = "";
            $selectOptionKid.css("color", "#0c0c0c");
            $(".select-placeholder-kid").css("color", "#0c0c0c");
            $(".select-placeholder-kid").text($(e).text());
            $(e).css("color", "#e1e1e1");
            $(e).css("color", "#e1e1e1");
            $(e).css("display", "none");
            kids = $(".select-placeholder-kid").text();

            let kidId = $(e).nextAll(".kidIdforPurchase").val();
            let eventId = $(e).nextAll(".eventIdforPurchase").val();
            let $selectedOption = $("<p class='selected-option'></p>").text(kids);
            $selectedOption.append("<input class='sendKidId'  name='kidIds' value='" + kidId + "'/>");
            $selectedOption.append("<input class='sendEventId' style='display:none;' name='eventId' value='" + eventId + "'/>");
            console.log(kidId)
            console.log(e)
            let $removeButton = $("<button>X</button>");

            $removeButton.click(() => {
                $selectedOption.remove();
                $removeButton.remove();
                $(e).css("display", "block");
            });

            $selectedOption.append($removeButton);
            $(".kids-table").append($selectedOption);
            $selectMenuBoxKid.hide();
        });
    });


    /* ì¹´í…Œê³ ë¦¬ ë */

    const $selectBox2 = $(".select-layout2");
    const $selectKidsCount = $(".select-kids-count");

    $selectBox2.mouseup(() => {
        $selectKidsCount.show();
    });

    $selectKidsCount.mouseleave(() => {
        $selectKidsCount.hide();
    })


    let $selectOption2 = $(".select-option2");

    $selectOption2.each((i, e) => {

        $(e).click(() => {
            $selectOption.css("color", "#0c0c0c");
            $(".select-placeholder2").css("color", "#0c0c0c");
            $(".select-placeholder2").text($(e).text());
            $(e).css("color", "#e1e1e1");
            $selectKidsCount.hide();
        });
    });


    $selectOption2.each((i, e) => {
        $(e).click(() => {
            $selectOption2.css("color", "#0c0c0c");
            $(".select-placeholder2").css("color", "#0c0c0c");
            $(".select-placeholder2").text($(e).text());
            $(e).css("color", "#e1e1e1");
            $selectKidsCount.hide();

        });
    });


</script>
<script>
    const $inputTitle = $(".title");
    const $maxCount = $(".text-max-count");
    // ì œëª© ì…ë ¥ js
    $inputTitle.keyup(() => {
        $maxCount.text((40 - $inputTitle.val().length) + "ì ë‚¨ìŒ");
    });

</script>
<script src="/js/components/header.js"></script>
</html>